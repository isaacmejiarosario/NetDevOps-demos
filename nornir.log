2021-02-20 12:04:21,534 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 5 hosts
2021-02-20 12:04:21,808 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.0.210:22

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.0.210)

2021-02-20 12:04:21,808 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:04:26,617 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 931, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/local/lib/python3.6/site-packages/paramiko/util.py", line 283, in retry_on_signal
    return function()
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 92, in _netmiko_open
    **netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py", line 315, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_ios.py", line 17, in __init__
    return super().__init__(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 346, in __init__
    self._open()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 351, in _open
    self.establish_connection()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 953, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.ssh_exception.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.10.20.176:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/ios/ios.py", line 170, in open
    device_type, netmiko_optional_args=self.netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 95, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.10.20.176

2021-02-20 12:04:26,617 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:04:26,620 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 931, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/local/lib/python3.6/site-packages/paramiko/util.py", line 283, in retry_on_signal
    return function()
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 92, in _netmiko_open
    **netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py", line 315, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_ios.py", line 17, in __init__
    return super().__init__(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 346, in __init__
    self._open()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 351, in _open
    self.establish_connection()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 953, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.ssh_exception.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.10.20.175:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/ios/ios.py", line 170, in open
    device_type, netmiko_optional_args=self.netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 95, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.10.20.175

2021-02-20 12:04:26,620 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:08:40,860 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 5 hosts
2021-02-20 12:08:41,080 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.0.210:22

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.0.210)

2021-02-20 12:08:41,081 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:08:45,898 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 931, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/local/lib/python3.6/site-packages/paramiko/util.py", line 283, in retry_on_signal
    return function()
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 92, in _netmiko_open
    **netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py", line 315, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_ios.py", line 17, in __init__
    return super().__init__(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 346, in __init__
    self._open()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 351, in _open
    self.establish_connection()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 953, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.ssh_exception.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.10.20.175:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/ios/ios.py", line 170, in open
    device_type, netmiko_optional_args=self.netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 95, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.10.20.175

2021-02-20 12:08:45,898 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:08:45,907 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 931, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/local/lib/python3.6/site-packages/paramiko/util.py", line 283, in retry_on_signal
    return function()
  File "/usr/local/lib/python3.6/site-packages/paramiko/client.py", line 349, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 92, in _netmiko_open
    **netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/netmiko/ssh_dispatcher.py", line 315, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/cisco/cisco_ios.py", line 17, in __init__
    return super().__init__(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 346, in __init__
    self._open()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 351, in _open
    self.establish_connection()
  File "/usr/local/lib/python3.6/site-packages/netmiko/base_connection.py", line 953, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.ssh_exception.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.10.20.176:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/napalm/ios/ios.py", line 170, in open
    device_type, netmiko_optional_args=self.netmiko_optional_args
  File "/usr/local/lib/python3.6/site-packages/napalm/base/base.py", line 95, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.10.20.176

2021-02-20 12:08:45,908 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 16, in load_vars
    basic_config(task)
  File "ntp.py", line 25, in basic_config
    task.run(task=napalm_configure, configuration= output)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_configure (failed)


2021-02-20 12:14:35,997 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 5 hosts
2021-02-20 12:14:36,009 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'load_yaml' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/data/load_yaml.py", line 24, in load_yaml
    with open(file, "r") as f:
FileNotFoundError: [Errno 2] No such file or directory: './host_vars/JPE2.yaml'

2021-02-20 12:14:36,010 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'load_yaml' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/data/load_yaml.py", line 24, in load_yaml
    with open(file, "r") as f:
FileNotFoundError: [Errno 2] No such file or directory: './host_vars/DIST1.yaml'

2021-02-20 12:14:36,016 - nornir.core.task -    ERROR -      start() - Host 'JPE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 14, in load_vars
    data = task.run(task=load_yaml, file=f"./host_vars/{task.host}.yaml")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: load_yaml (failed)


2021-02-20 12:14:36,018 - nornir.core.task -    ERROR -      start() - Host 'DIST1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 14, in load_vars
    data = task.run(task=load_yaml, file=f"./host_vars/{task.host}.yaml")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: load_yaml (failed)


2021-02-20 12:14:36,027 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'load_yaml' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/data/load_yaml.py", line 24, in load_yaml
    with open(file, "r") as f:
FileNotFoundError: [Errno 2] No such file or directory: './host_vars/DIST2.yaml'

2021-02-20 12:14:36,027 - nornir.core.task -    ERROR -      start() - Host 'DIST2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "ntp.py", line 14, in load_vars
    data = task.run(task=load_yaml, file=f"./host_vars/{task.host}.yaml")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: load_yaml (failed)


2021-02-20 12:20:46,592 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-02-20 15:57:23,388 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-02-26 15:27:44,427 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:27:45,240 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:28:09,543 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:28:10,377 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:29:16,230 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:29:26,061 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:30:06,587 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:30:07,503 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:30:22,529 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-02-26 15:30:23,544 -  nornir.core -     INFO -        run() - Running task 'ntp_stats' with args {} on 1 hosts
2021-08-23 19:23:22,828 -  nornir.core -  WARNING -        run() - Task 'load_vars' has not been run – 0 hosts selected
2021-08-23 19:24:32,247 -  nornir.core -  WARNING -        run() - Task 'load_vars' has not been run – 0 hosts selected
2021-08-23 19:26:47,334 -  nornir.core -  WARNING -        run() - Task 'load_vars' has not been run – 0 hosts selected
2021-08-23 19:40:49,234 -  nornir.core -     INFO -        run() - Running task 'getter' with args {} on 2 hosts
2021-08-23 19:40:51,400 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_get' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_get.py", line 28, in netconf_get
    scrapli_response = scrapli_conn.get(filter_=filter_, filter_type=filter_type)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 96, in get
    response = self._pre_get(filter_=filter_, filter_type=filter_type)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/base_driver.py", line 327, in _pre_get
    xml_filter_elem = self._build_filters(filters=[filter_], filter_type=filter_type)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/base_driver.py", line 275, in _build_filters
    raise CapabilityNotSupported(msg)
scrapli_netconf.exceptions.CapabilityNotSupported: xpath filter requested, but is not supported by the server

2021-08-23 19:40:51,400 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 26, in getter
    result = task.run(task=netconf_get, filter_="/native/interface", filter_type="xpath")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_get (failed)


2021-08-23 19:40:59,513 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'netconf_get' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 395, in read
    s = self.fileobj.read1(size)
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 103, in _authenticate
    new_output = self.session.read()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 400, in read
    raise EOFError("End Of File (EOF). Exception style platform.")
EOFError: End Of File (EOF). Exception style platform.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_get.py", line 27, in netconf_get
    scrapli_conn = task.host.get_connection("scrapli_netconf", task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/connection.py", line 166, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 64, in open
    login_bytes = self.transport.open_netconf()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 38, in open_netconf
    login_bytes = self._open_netconf_pty()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 58, in _open_netconf_pty
    login_bytes: bytes = self._authenticate()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 644, in get
    raise self._value
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 107, in _authenticate
    self._ssh_message_handler(output=output)
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/systemssh.py", line 286, in _ssh_message_handler
    raise ScrapliAuthenticationFailed(msg)
scrapli.exceptions.ScrapliAuthenticationFailed: Timed out connecting to host 172.20.100.14

2021-08-23 19:40:59,513 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 26, in getter
    result = task.run(task=netconf_get, filter_="/native/interface", filter_type="xpath")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_get (failed)


2021-08-23 19:42:52,448 -  nornir.core -     INFO -        run() - Running task 'getter' with args {} on 1 hosts
2021-08-23 19:42:52,449 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_get' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
TypeError: netconf_get() missing 1 required positional argument: 'filter_'

2021-08-23 19:42:52,449 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 26, in getter
    result = task.run(task=netconf_get)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_get (failed)


2021-08-23 19:44:25,985 -  nornir.core -     INFO -        run() - Running task 'getter' with args {} on 1 hosts
2021-08-23 19:44:25,986 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_get' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
TypeError: netconf_get() missing 1 required positional argument: 'filter_'

2021-08-23 19:44:25,986 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 26, in getter
    result = task.run(task=netconf_get)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_get (failed)


2021-08-23 20:10:25,183 -  nornir.core -     INFO -        run() - Running task 'getter' with args {} on 1 hosts
2021-08-23 20:10:25,184 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 26, in getter
    result = task.run(task=netconf_get_config, source="running")
NameError: name 'netconf_get_config' is not defined

2021-08-23 20:11:39,992 -  nornir.core -     INFO -        run() - Running task 'getter' with args {} on 1 hosts
2021-08-23 20:11:43,659 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls.py", line 27, in getter
    result_pretty = minidom.parseString(result).toprettyxml()
  File "/usr/lib64/python3.6/xml/dom/minidom.py", line 1968, in parseString
    return expatbuilder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 925, in parseString
    return builder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 223, in parseString
    parser.Parse(string, True)
TypeError: a bytes-like object is required, not 'MultiResult'

2021-08-23 20:42:53,482 -  nornir.core -     INFO -        run() - Running task 'get_config_file' with args {} on 1 hosts
2021-08-24 15:36:16,716 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 15:41:25,484 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 15:44:31,313 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 15:44:34,797 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=vrf.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 15:46:47,423 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 16:43:14,383 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 16:47:39,044 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 16:53:58,968 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:01:01,667 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:01:01,681 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/iosxr/ospf.j2", line 31, in template
    </name-scopes>
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endfor' or 'else'. The innermost block that needs to be closed is 'for'.

2021-08-24 18:01:01,682 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 23, in load_vars
    ospf = task.run(task=template_file, template="ospf.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-24 18:05:55,479 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:13:01,421 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:21:35,144 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:22:38,399 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:22:40,534 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=ldp.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 18:23:58,351 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:24:00,482 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=ldp.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 18:24:24,089 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:24:26,222 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=ldp.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 18:24:49,424 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:24:51,659 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=ldp.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 18:25:11,558 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 18:25:13,689 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=ldp.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 18:25:38,064 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:09:54,982 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:18:54,344 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:21:23,353 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:21:26,399 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 395, in read
    s = self.fileobj.read1(size)
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 103, in _authenticate
    new_output = self.session.read()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 400, in read
    raise EOFError("End Of File (EOF). Exception style platform.")
EOFError: End Of File (EOF). Exception style platform.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 38, in netconf_edit_config
    scrapli_conn = task.host.get_connection("scrapli_netconf", task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/connection.py", line 166, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 64, in open
    login_bytes = self.transport.open_netconf()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 38, in open_netconf
    login_bytes = self._open_netconf_pty()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 58, in _open_netconf_pty
    login_bytes: bytes = self._authenticate()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 644, in get
    raise self._value
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 107, in _authenticate
    self._ssh_message_handler(output=output)
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/systemssh.py", line 286, in _ssh_message_handler
    raise ScrapliAuthenticationFailed(msg)
scrapli.exceptions.ScrapliAuthenticationFailed: No route to host 172.20.100.13

2021-08-24 20:21:26,400 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=int.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-24 20:27:01,233 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:34:17,059 -  nornir.core -     INFO -        run() - Running task 'get_config_file' with args {} on 1 hosts
2021-08-24 20:38:54,015 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-24 20:44:00,351 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 16:33:30,348 -  nornir.core -     INFO -        run() - Running task 'junos_getter' with args {} on 1 hosts
2021-08-25 16:35:07,875 -  nornir.core -     INFO -        run() - Running task 'junos_getter' with args {} on 1 hosts
2021-08-25 16:35:08,523 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'junos_getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 36, in junos_getter
    result_pretty = minidom.parseString(result).toprettyxml()
  File "/usr/lib64/python3.6/xml/dom/minidom.py", line 1968, in parseString
    return expatbuilder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 925, in parseString
    return builder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 223, in parseString
    parser.Parse(string, True)
TypeError: a bytes-like object is required, not 'MultiResult'

2021-08-25 16:36:59,869 -  nornir.core -     INFO -        run() - Running task 'junos_getter' with args {} on 1 hosts
2021-08-25 16:37:00,434 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'junos_getter' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 36, in junos_getter
    result_pretty = minidom.parseString(result).toprettyxml()
  File "/usr/lib64/python3.6/xml/dom/minidom.py", line 1968, in parseString
    return expatbuilder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 925, in parseString
    return builder.parseString(string)
  File "/usr/lib64/python3.6/xml/dom/expatbuilder.py", line 223, in parseString
    parser.Parse(string, True)
TypeError: a bytes-like object is required, not 'MultiResult'

2021-08-25 16:40:45,021 -  nornir.core -     INFO -        run() - Running task 'junos_getter' with args {} on 1 hosts
2021-08-25 16:50:01,335 -  nornir.core -     INFO -        run() - Running task 'get_config_file' with args {} on 2 hosts
2021-08-25 16:50:01,953 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'write_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/files/write_file.py", line 51, in write_file
    diff = _generate_diff(filename, content, append)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/files/write_file.py", line 23, in _generate_diff
    new_content = content.splitlines()
AttributeError: 'dict' object has no attribute 'splitlines'

2021-08-25 16:50:01,953 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'get_config_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 48, in get_config_file
    task.run(task=write_file, content=r2.result, filename=str(date_dir) + f"/{task.host}.txt")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: write_file (failed)


2021-08-25 16:53:50,720 -  nornir.core -     INFO -        run() - Running task 'junos_getter' with args {} on 1 hosts
2021-08-25 16:55:43,043 -  nornir.core -     INFO -        run() - Running task 'get_config_file' with args {} on 1 hosts
2021-08-25 16:55:43,618 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'write_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/files/write_file.py", line 51, in write_file
    diff = _generate_diff(filename, content, append)
  File "/usr/local/lib/python3.6/site-packages/nornir_utils/plugins/tasks/files/write_file.py", line 23, in _generate_diff
    new_content = content.splitlines()
AttributeError: 'dict' object has no attribute 'splitlines'

2021-08-25 16:55:43,619 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'get_config_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 48, in get_config_file
    task.run(task=write_file, content=r2.result, filename=str(date_dir) + f"/{task.host}.txt")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: write_file (failed)


2021-08-25 17:09:48,240 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 17:11:16,832 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 17:42:55,716 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 18:00:46,785 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 18:02:49,572 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:08:01,757 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:08:01,770 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/vrf.j2", line 8, in template
    {% if vrf == {{int.vrf}} %}
jinja2.exceptions.TemplateSyntaxError: expected token ':', got '}'

2021-08-25 19:08:01,770 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    vrf = task.run(task=template_file, template="vrf.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 19:10:33,493 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:14:01,349 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:24:17,738 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:25:22,535 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:41:23,392 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:57:20,618 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:57:20,627 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 7, in top-level template code
    <name>{{ int.name }}.{{ int.unit }}</name>
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'unit'

2021-08-25 19:57:20,627 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 19:58:51,244 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 19:58:51,254 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 7, in top-level template code
    <name>{{ int.name.int.unit }}</name>
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'int'

2021-08-25 19:58:51,254 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:00:28,748 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:00:28,757 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 7, in top-level template code
    <name>{{ int.name}}.{{int.unit}}</name>
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'unit'

2021-08-25 20:00:28,757 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:03:02,186 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:03:02,196 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 5, in top-level template code
    {%if int.type != "Loopback0" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:03:02,196 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:04:52,891 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:04:52,900 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 5, in top-level template code
    {%if int.type != "Loopback" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:04:52,900 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:06:35,314 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:06:35,324 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 15, in top-level template code
    {%if int.type != "Loopback" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:06:35,324 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:23:37,382 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:23:37,391 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 7, in top-level template code
    <name>{{ int.name.int.unit}}</name>
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'int'

2021-08-25 20:23:37,391 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:24:19,360 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:24:19,368 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 15, in top-level template code
    {%if int.type != "Loopback" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:24:19,369 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:26:24,985 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:32:20,014 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:32:49,803 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:34:33,394 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:38:03,762 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:38:03,771 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 15, in top-level template code
    {%if int.type != "Loopback" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:38:03,771 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:40:50,282 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:40:50,292 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/junos/ldp.j2", line 15, in top-level template code
    {%if int.type == "ethernet" %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'type'

2021-08-25 20:40:50,292 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    ldp = task.run(task=template_file, template="ldp.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-25 20:41:47,232 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:42:19,180 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-25 20:44:20,160 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-26 12:55:29,206 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 1 hosts
2021-08-26 13:00:48,247 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:04:04,331 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:09:06,372 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:16:55,858 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:22:43,676 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:22:44,361 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: missing or invalid prefix length 'None' in address '1.1.1.21/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 491, in try_load
    rpc_contents, ignore_warning=ignore_warning, **rpc_xattrs
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 288, in load_config
    return self._junos.execute(rpc, ignore_warning=ignore_warning)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: 1.1.1.21/None, message: error: missing or invalid prefix length 'None' in address '1.1.1.21/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 36, in pyez_config
    config.load(payload, format=data_format, update=False)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 579, in load
    return try_load(rpc_contents, rpc_xattrs, ignore_warning=ignore_warning)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 496, in try_load
    raise ConfigLoadError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.ConfigLoadError: ConfigLoadError(severity: error, bad_element: 1.1.1.21/None, message: error: missing or invalid prefix length 'None' in address '1.1.1.21/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements)

2021-08-26 13:22:44,361 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 13:22:44,362 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: missing or invalid prefix length 'None' in address '1.1.1.22/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 491, in try_load
    rpc_contents, ignore_warning=ignore_warning, **rpc_xattrs
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 288, in load_config
    return self._junos.execute(rpc, ignore_warning=ignore_warning)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: 1.1.1.22/None, message: error: missing or invalid prefix length 'None' in address '1.1.1.22/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 36, in pyez_config
    config.load(payload, format=data_format, update=False)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 579, in load
    return try_load(rpc_contents, rpc_xattrs, ignore_warning=ignore_warning)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 496, in try_load
    raise ConfigLoadError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.ConfigLoadError: ConfigLoadError(severity: error, bad_element: 1.1.1.22/None, message: error: missing or invalid prefix length 'None' in address '1.1.1.22/None'
warning: mgd: statement must contain additional statements
warning: mgd: statement must contain additional statements)

2021-08-26 13:22:44,362 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 13:26:07,310 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:26:08,909 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: Cannot assign address 0 on subnet
error: configuration check-out failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 199, in commit_check
    self.rpc.commit_configuration(check=True, **rpc_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: address 172.20.0.252/30, message: error: Cannot assign address 0 on subnet
error: configuration check-out failed)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 14, in pyez_commit
    if config.commit_check() == True:
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 207, in commit_check
    raise CommitError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.CommitError: CommitError(edit_path: [edit interfaces ge-0/0/2 unit 0 family inet], bad_element: address 172.20.0.252/30, message: error: Cannot assign address 0 on subnet
error: configuration check-out failed)

2021-08-26 13:26:08,909 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 13:27:15,890 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 349, in _request
    raise self._error
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 498, in run
    raise SessionCloseError(self._buffer.getvalue())
ncclient.transport.errors.SessionCloseError: Unexpected session close

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 635, in unlock
    raise err
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 844, in execute
    raise EzErrors.ConnectClosedError(self)
jnpr.junos.exception.ConnectClosedError: ConnectClosedError(172.20.100.21)

2021-08-26 13:27:15,890 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 13:28:38,301 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:30:57,363 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:30:57,544 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.21:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.100.21)

2021-08-26 13:30:57,545 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 13:30:59,112 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: Cannot assign address 0 on subnet
error: configuration check-out failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 199, in commit_check
    self.rpc.commit_configuration(check=True, **rpc_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: address 172.20.0.252/30, message: error: Cannot assign address 0 on subnet
error: configuration check-out failed)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 14, in pyez_commit
    if config.commit_check() == True:
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 207, in commit_check
    raise CommitError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.CommitError: CommitError(edit_path: [edit interfaces ge-0/0/2 unit 0 family inet], bad_element: address 172.20.0.252/30, message: error: Cannot assign address 0 on subnet
error: configuration check-out failed)

2021-08-26 13:30:59,112 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 13:36:46,569 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:36:46,794 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.21:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.100.21)

2021-08-26 13:36:46,794 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 13:37:38,424 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 349, in _request
    raise self._error
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 498, in run
    raise SessionCloseError(self._buffer.getvalue())
ncclient.transport.errors.SessionCloseError: Unexpected session close

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 635, in unlock
    raise err
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 844, in execute
    raise EzErrors.ConnectClosedError(self)
jnpr.junos.exception.ConnectClosedError: ConnectClosedError(172.20.100.22)

2021-08-26 13:37:38,425 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 13:44:29,287 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 13:44:29,364 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.22:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.100.22)

2021-08-26 13:44:29,365 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 13:44:29,365 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.21:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.100.21)

2021-08-26 13:44:29,366 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 14:49:28,228 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 14:49:28,319 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.22:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1379, in open
    raise EzErrors.ConnectRefusedError(self)
jnpr.junos.exception.ConnectRefusedError: ConnectRefusedError(172.20.100.22)

2021-08-26 14:49:28,319 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 27, in load_vars
    response = task.run(task=pyez_config, payload= int.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 14:51:23,643 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:17:44,797 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:49:21,095 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:52:41,410 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:53:57,437 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:53:59,003 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: Interface not configured in this instance
error: configuration check-out failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 199, in commit_check
    self.rpc.commit_configuration(check=True, **rpc_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: interface lo0.0, message: error: Interface not configured in this instance
error: configuration check-out failed)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 14, in pyez_commit
    if config.commit_check() == True:
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 207, in commit_check
    raise CommitError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.CommitError: CommitError(edit_path: [edit protocols ospf area 0.0.0.0], bad_element: interface lo0.0, message: error: Interface not configured in this instance
error: configuration check-out failed)

2021-08-26 15:53:59,003 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 15:53:59,072 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: if_instance: Multiple loopback interfaces not permitted in client-a routing instance
error: configuration check-out failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 199, in commit_check
    self.rpc.commit_configuration(check=True, **rpc_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: unit 1, message: error: if_instance: Multiple loopback interfaces not permitted in client-a routing instance
error: configuration check-out failed)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 14, in pyez_commit
    if config.commit_check() == True:
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 207, in commit_check
    raise CommitError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.CommitError: CommitError(edit_path: [edit interfaces lo0], bad_element: unit 1, message: error: if_instance: Multiple loopback interfaces not permitted in client-a routing instance
error: configuration check-out failed)

2021-08-26 15:53:59,073 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 31, in load_vars
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 15:56:33,118 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:57:54,117 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 15:57:54,126 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 197, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: int.j2

2021-08-26 15:57:54,127 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/usr/local/lib/python3.6/site-packages/jinja2/loaders.py", line 197, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: int.j2

2021-08-26 15:57:54,127 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    data = task.run(task=template_file, template="int.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 15:57:54,128 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    data = task.run(task=template_file, template="int.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 15:58:14,069 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:33:58,699 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:34:00,851 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/iosxr/ospf.j2", line 19, in top-level template code
    {%if int.type == "Loopback" %}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'type'

2021-08-26 16:34:00,852 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 18, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 24, in mpls_config
    ospf = task.run(task=template_file, template="ospf.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 16:34:00,962 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/iosxr/ospf.j2", line 19, in top-level template code
    {%if int.type == "Loopback" %}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'type'

2021-08-26 16:34:00,962 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 18, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 24, in mpls_config
    ospf = task.run(task=template_file, template="ospf.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 16:38:53,518 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:39:57,634 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:40:07,828 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 395, in read
    s = self.fileobj.read1(size)
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 103, in _authenticate
    new_output = self.session.read()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 400, in read
    raise EOFError("End Of File (EOF). Exception style platform.")
EOFError: End Of File (EOF). Exception style platform.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 38, in netconf_edit_config
    scrapli_conn = task.host.get_connection("scrapli_netconf", task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/connection.py", line 166, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 64, in open
    login_bytes = self.transport.open_netconf()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 38, in open_netconf
    login_bytes = self._open_netconf_pty()
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 58, in _open_netconf_pty
    login_bytes: bytes = self._authenticate()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 644, in get
    raise self._value
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/transport/systemssh.py", line 107, in _authenticate
    self._ssh_message_handler(output=output)
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/systemssh.py", line 286, in _ssh_message_handler
    raise ScrapliAuthenticationFailed(msg)
scrapli.exceptions.ScrapliAuthenticationFailed: Timed out connecting to host 172.20.100.14

2021-08-26 16:40:07,828 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 18, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 23, in mpls_config
    task.run(task=netconf_edit_config, target="candidate", config=vrf.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-26 16:46:12,163 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:50:22,652 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 16:50:23,436 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is already open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 603, in lock
    self.rpc.lock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is already open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 22, in pyez_config
    config.lock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 606, in lock
    raise LockError(rsp=err.rsp)
jnpr.junos.exception.LockError: LockError(severity: error, bad_element: None, message: Configuration database is already open)

2021-08-26 16:50:23,436 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 18, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 35, in mpls_config
    task.run(task=pyez_config, payload= ospf.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 16:50:23,437 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is already open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 603, in lock
    self.rpc.lock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is already open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 22, in pyez_config
    config.lock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 606, in lock
    raise LockError(rsp=err.rsp)
jnpr.junos.exception.LockError: LockError(severity: error, bad_element: None, message: Configuration database is already open)

2021-08-26 16:50:23,438 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 18, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 35, in mpls_config
    task.run(task=pyez_config, payload= ospf.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 17:34:36,537 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 17:34:37,386 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is already open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 603, in lock
    self.rpc.lock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is already open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 22, in pyez_config
    config.lock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 606, in lock
    raise LockError(rsp=err.rsp)
jnpr.junos.exception.LockError: LockError(severity: error, bad_element: None, message: Configuration database is already open)

2021-08-26 17:34:37,387 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_config, payload= ospf.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 17:34:37,410 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is already open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 603, in lock
    self.rpc.lock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is already open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 22, in pyez_config
    config.lock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 606, in lock
    raise LockError(rsp=err.rsp)
jnpr.junos.exception.LockError: LockError(severity: error, bad_element: None, message: Configuration database is already open)

2021-08-26 17:34:37,411 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_config, payload= ospf.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-08-26 17:48:17,235 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 17:48:31,225 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:48:31,226 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 41, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 17:48:31,610 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:48:31,611 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 41, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 17:53:34,338 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 17:53:47,894 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:53:47,895 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 40, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 17:53:48,219 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:53:48,219 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 40, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 17:55:04,683 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 17:55:09,307 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:55:09,307 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 17:55:09,388 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 17:55:09,388 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 18:15:04,479 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:15:09,135 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 18:15:09,135 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 18:15:09,204 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'pyez_commit' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 837, in execute
    filter_xml=kvargs.get("filter_xml"),
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 231, in execute
    huge_tree=self._huge_tree).request(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/usr/local/lib/python3.6/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
Configuration database is not open


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 630, in unlock
    self.rpc.unlock_configuration()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: Configuration database is not open)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_commit.py", line 18, in pyez_commit
    config.unlock()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/utils/config.py", line 633, in unlock
    raise UnlockError(rsp=err.rsp)
jnpr.junos.exception.UnlockError: UnlockError(severity: error, bad_element: None, message: Configuration database is not open)

2021-08-26 18:15:09,204 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 34, in mpls_config
    task.run(task=pyez_commit)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_commit (failed)


2021-08-26 18:29:14,319 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:31:08,424 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:32:07,961 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:34:03,732 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:43:55,723 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:43:55,752 - nornir.core.task -    ERROR -      start() - Host 'JPE4': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=int.result)
AttributeError: type object 'int' has no attribute 'result'

2021-08-26 18:43:55,762 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=int.result)
AttributeError: type object 'int' has no attribute 'result'

2021-08-26 18:45:01,776 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:45:01,817 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/iosxr/mpls-l3vpn.j2", line 148, in top-level template code
    <interface-name>{{ int.name }}</interface-name>
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'name'

2021-08-26 18:45:01,817 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'template_file' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/usr/local/lib/python3.6/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/usr/local/lib/python3.6/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "templates/iosxr/mpls-l3vpn.j2", line 148, in top-level template code
    <interface-name>{{ int.name }}</interface-name>
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'name'

2021-08-26 18:45:01,817 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    mpls = task.run(task=template_file, template="mpls-l3vpn.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 18:45:01,818 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 24, in load_vars
    mpls = task.run(task=template_file, template="mpls-l3vpn.j2", path=f"templates/{task.host.platform}/")
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: template_file (failed)


2021-08-26 18:46:44,435 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:47:16,506 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 640, in get
    raise TimeoutError
multiprocessing.context.TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 43, in netconf_edit_config
    scrapli_response = scrapli_conn.edit_config(config=config, target=target)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 144, in edit_config
    raw_response = self.channel.send_input_netconf(response.channel_input)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/channel/channel.py", line 206, in send_input_netconf
    channel_input=final_channel_input, strip_prompt=False, eager=True
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 288, in multiprocessing_timeout
    self._handle_timeout()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 191, in _handle_timeout
    self.close()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/systemssh.py", line 458, in close
    self.session.close()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 355, in close
    del self.fileobj
AttributeError: fileobj

2021-08-26 18:47:16,508 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=mpls.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-26 18:47:16,699 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 640, in get
    raise TimeoutError
multiprocessing.context.TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 43, in netconf_edit_config
    scrapli_response = scrapli_conn.edit_config(config=config, target=target)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 144, in edit_config
    raw_response = self.channel.send_input_netconf(response.channel_input)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/channel/channel.py", line 206, in send_input_netconf
    channel_input=final_channel_input, strip_prompt=False, eager=True
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 288, in multiprocessing_timeout
    self._handle_timeout()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 192, in _handle_timeout
    raise ScrapliTimeout(self.message)
scrapli.exceptions.ScrapliTimeout: Timed out sending input to device.

2021-08-26 18:47:16,699 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=mpls.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-26 18:47:51,219 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-08-26 18:48:23,173 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 640, in get
    raise TimeoutError
multiprocessing.context.TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 43, in netconf_edit_config
    scrapli_response = scrapli_conn.edit_config(config=config, target=target)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 144, in edit_config
    raw_response = self.channel.send_input_netconf(response.channel_input)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/channel/channel.py", line 206, in send_input_netconf
    channel_input=final_channel_input, strip_prompt=False, eager=True
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 288, in multiprocessing_timeout
    self._handle_timeout()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 191, in _handle_timeout
    self.close()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/systemssh.py", line 458, in close
    self.session.close()
  File "/usr/local/lib/python3.6/site-packages/scrapli/transport/ptyprocess.py", line 355, in close
    del self.fileobj
AttributeError: fileobj

2021-08-26 18:48:23,175 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE2': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=mpls.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-26 18:48:23,350 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'netconf_edit_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 286, in multiprocessing_timeout
    result = future.get(timeout=self.timeout_duration)
  File "/usr/lib64/python3.6/multiprocessing/pool.py", line 640, in get
    raise TimeoutError
multiprocessing.context.TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_scrapli/tasks/netconf_edit_config.py", line 43, in netconf_edit_config
    scrapli_response = scrapli_conn.edit_config(config=config, target=target)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/driver/driver.py", line 144, in edit_config
    raw_response = self.channel.send_input_netconf(response.channel_input)
  File "/usr/local/lib/python3.6/site-packages/scrapli_netconf/channel/channel.py", line 206, in send_input_netconf
    channel_input=final_channel_input, strip_prompt=False, eager=True
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 114, in decorate
    wrapped_func=wrapped_func, args=args, kwargs=kwargs
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 288, in multiprocessing_timeout
    self._handle_timeout()
  File "/usr/local/lib/python3.6/site-packages/scrapli/decorators.py", line 192, in _handle_timeout
    raise ScrapliTimeout(self.message)
scrapli.exceptions.ScrapliTimeout: Timed out sending input to device.

2021-08-26 18:48:23,351 - nornir.core.task -    ERROR -      start() - Host 'IOS-XR-PE1': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "nornir-getters.py", line 25, in load_vars
    task.run(task=netconf_edit_config, target="candidate", config=mpls.result)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netconf_edit_config (failed)


2021-08-26 18:57:45,314 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-09-29 05:18:48,086 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-09-29 05:21:03,698 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 2 hosts
2021-09-29 05:23:11,005 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'pyez_config' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1360, in open
    "use_filter": self._use_filter,
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/usr/local/lib/python3.6/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 172.20.100.21:830

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/tasks/pyez_config.py", line 19, in pyez_config
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 448, in get_connection
    extras=conn.extras,
  File "/usr/local/lib/python3.6/site-packages/nornir/core/inventory.py", line 499, in open_connection
    configuration=configuration,
  File "/usr/local/lib/python3.6/site-packages/nornir_pyez/plugins/connections/__init__.py", line 36, in open
    connection.open()
  File "/usr/local/lib/python3.6/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(172.20.100.21)

2021-09-29 05:23:11,007 - nornir.core.task -    ERROR -      start() - Host 'JPE3': task 'load_vars' failed with traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "mpls_l3vpn_config.py", line 17, in load_vars
    mpls_config(task)
  File "mpls_l3vpn_config.py", line 32, in mpls_config
    task.run(task=pyez_config, payload= mpls.result, data_format='xml')
  File "/usr/local/lib/python3.6/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: pyez_config (failed)


2021-09-29 05:34:14,823 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 4 hosts
2021-09-29 05:35:57,391 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 4 hosts
2021-09-29 20:15:03,339 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 4 hosts
2021-09-29 20:32:21,923 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 4 hosts
2021-09-29 21:23:04,737 -  nornir.core -     INFO -        run() - Running task 'load_vars' with args {} on 4 hosts
